!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="dist/",r(r.s=0)}([function(e,t){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=document.getElementById("canvas"),n=o.getContext("2d"),c=document.querySelector(".color"),l=document.querySelector(".tools"),a=document.querySelector("#resolution"),i={fillBucket:!1,chooseColor:!1,pencil:!0},u=!1;function f(){var e=document.querySelectorAll(".tools--buttons-elem");r(e).forEach((function(e){e.classList.remove("active")})),!0===i.fillBucket&&e[0].classList.add("active"),!0===i.chooseColor&&e[1].classList.add("active"),!0===i.pencil&&e[2].classList.add("active")}f(),o.width=512,o.height=512;var s=128;function d(){var e;localStorage.setItem("canvasImage",o.toDataURL()),localStorage.setItem("tools",JSON.stringify(i)),localStorage.setItem("color",((e={}).current=document.querySelector("#current").value,e.prev=document.querySelector("#prev").style.backgroundColor,JSON.stringify(e)))}function v(){return document.querySelector("#current").value}function g(){var e=v(),t=document.getElementById("prev");t.style.backgroundColor=e,t.setAttribute("data","".concat(e))}a.addEventListener("change",(function(e){s=e.target.value}));c.onclick=function(e){var t=document.querySelector("#current");"blue"===e.target.innerText?(g(),t.value="#0000FF"):"red"===e.target.innerText?(g(),t.value="#FF0000"):"Prev color"===e.target.innerText?t.value=e.target.previousElementSibling.getAttribute("data"):"Current color"!==e.target.innerText&&"color"!==e.target.type||g()},l.onclick=function(e){i.fillBucket=!1,i.chooseColor=!1,i.pencil=!1,"Fill bucket"===e.target.innerText?i.fillBucket=!0:"Choose color"===e.target.innerText?i.chooseColor=!0:"Pencil"===e.target.innerText&&(i.pencil=!0),f()};var y={x0:0,y0:0,x1:0,y1:0};document.addEventListener("mousedown",(function(e){if(!0===i.pencil&&"canvas"===e.target.id)u=!0,y.x0=Math.floor(e.offsetX/s),y.y0=Math.floor(e.offsetY/s);else if(!0===i.chooseColor&&"canvas"===e.target.id){var t=e.offsetX,r=e.offsetY,c=document.querySelector("#current"),l=n.getImageData(0,0,512,512);g();var a=function(e,t,r){var o=e.width,n=e.data;return{r:n[4*(o*r+t)],g:n[4*(o*r+t)+1],b:n[4*(o*r+t)+2],a:n[4*(o*r+t)+3]}}(l,t,r);c.value="#".concat("000000".concat((f=a.r,d=a.g,m=a.b,(f<<16|d<<8|m).toString(16))).slice(-6))}else!0===i.fillBucket&&"canvas"===e.target.id&&(n.fillStyle="".concat(v()),n.fill(),n.fillRect(0,0,o.width,o.height));var f,d,m})),document.addEventListener("mousemove",(function(e){!0===u&&(y.x1=Math.floor(e.offsetX/s),y.y1=Math.floor(e.offsetY/s),function(e,t,r,o){for(var c,l,a=Math.abs(r-e),i=e<r?1:-1,u=Math.abs(o-t),f=t<o?1:-1,d=(a>u?a:-u)/2;c=e,l=t,n.beginPath(),n.fillStyle="".concat(v()),n.fill(),n.fillRect(c*s,l*s,s,s),y.x0=y.x1,y.y0=y.y1,e!==r||t!==o;){var g=d;g>-a&&(d-=u,e+=i),g<u&&(d+=a,t+=f)}}(y.x0,y.y0,y.x1,y.y1))})),document.addEventListener("mouseup",(function(){!0===i.pencil&&(u=!1)})),document.addEventListener("keydown",(function(e){switch(e.code){case"KeyB":l.children[0].click();break;case"KeyP":l.children[2].click();break;case"KeyC":l.children[1].click();break;case"KeyS":d();break;case"KeyR":n.fillStyle="#ffffff",n.fill(),n.fillRect(0,0,o.width,o.height);break;case"KeyL":!function(){var e=localStorage.getItem("canvasImage"),t=new Image;t.src=e,t.onload=function(){n.drawImage(t,0,0)};var r=JSON.parse(localStorage.getItem("tools"));i.fillBucket=!1,i.chooseColor=!1,i.pencil=!1,i.fillBucket=r.fillBucket,i.chooseColor=r.chooseColor,i.pencil=r.pencil,f();var o=JSON.parse(localStorage.getItem("color"));document.querySelector("#current").value=o.current,document.querySelector("#prev").style.backgroundColor=o.prev}()}}))}]);
//# sourceMappingURL=main.js.map